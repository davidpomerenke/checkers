(this["webpackJsonpaima-checkers"]=this["webpackJsonpaima-checkers"]||[]).push([[0],{18:function(e,t,n){e.exports=n(34)},23:function(e,t,n){},34:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(16),o=n.n(i),s=n(7),c=n(8),l=n(3),u=n(4),h=n(5),p=n(2),m=n(6),f=n(1),b=(n(23),new(n(17).a)({initialState:{p:[[0,0,!1],[0,2,!1],[0,4,!1],[0,6,!1],[1,1,!1],[1,3,!1],[1,5,!1],[1,7,!1],[2,0,!1],[2,2,!1],[2,4,!1],[2,6,!1]],q:[[5,1,!1],[5,3,!1],[5,5,!1],[5,7,!1],[6,0,!1],[6,2,!1],[6,4,!1],[6,6,!1],[7,1,!1],[7,3,!1],[7,5,!1],[7,7,!1]],player:"p",opponent:"q"},player:function(e){return e.player},actions:function(e){return e[e.player].flatMap((function(t){var n=Object(f.a)(t,3),r=n[0],a=n[1],i=n[2];return S(i).flatMap((function(t){return[].concat(Object(s.a)(d(e,[r,a,i],t)),Object(s.a)(v(e,[r,a,i],t)))}))})).filter((function(e,t,n){return!n.some((function(e){return M(e[0],e[1])/2===2}))||M(e[0],e[1])/2===2}))},result:function(e,t){return T(e,t,!0)},terminalTest:function(e){return 0===e.p.length||0===e.q.length||0===b.actions(e).length},utility:function(e){return e.p.length-e.q.length},heuristic:function(e){return e.p.length-e.q.length}})),d=function(e,t,n){return O(y(e,t,n))&&!k(e,y(e,t,n))?[[t,j(e,t,n)]]:[]},v=function e(t,n,r){var a=Object(f.a)(n,3),i=a[0],o=a[1],c=a[2],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return O(y(t,[i,o],r,2))&&!k(t,y(t,[i,o],r,2))&&C(t,y(t,[i,o],r),t.opponent)?[[].concat(Object(s.a)(l),[[i,o,c],j(t,[i,o,c],r,2)])].concat(Object(s.a)(S(g(t,[i,o,c],r,2)).flatMap((function(n){return e(1===l.length?t:T(t,l),j(t,[i,o,c],r,2),n,[].concat(Object(s.a)(l),[[i,o,c]]))})))):[]},y=function(e,t,n){var r=Object(f.a)(t,3),a=r[0],i=r[1],o=(r[2],Object(f.a)(n,2)),s=o[0],c=o[1],l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return[a+s*E(e)*l,i+c*l]},g=function(e,t,n){var r=Object(f.a)(t,3),a=r[0],i=r[1],o=r[2],s=Object(f.a)(n,2),c=s[0],l=s[1],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return o||a+c*E(e)*u===3.5+3.5*E(e)||2===u&&e[e.opponent].find((function(t){var n=Object(f.a)(t,2),r=n[0],o=n[1];return r===a+c*E(e)&&o===i+l}))[2]},j=function(e,t,n){var r=Object(f.a)(t,3),a=r[0],i=r[1],o=r[2],c=Object(f.a)(n,2),l=c[0],u=c[1],h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return[].concat(Object(s.a)(y(e,[a,i,o],[l,u],h)),[g(e,[a,i,o],[l,u],h)])},O=function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return n>=0&&n<=7&&r>=0&&r<=7},k=function(e,t){return["p","q"].some((function(n){return C(e,t,n)}))},C=function(e,t,n){return e[n].some((function(e){return w(t,e)}))},E=function(e){return"p"===e.player?1:-1},w=function(e,t){var n=Object(f.a)(e,2),r=n[0],a=n[1],i=Object(f.a)(t,2),o=i[0],s=i[1];return r===o&&a===s},S=function(e){return[[1,-1],[1,1]].concat(Object(s.a)(e?[[-1,-1],[-1,1]]:[]))},T=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n.length>=2?q(e(t,n.slice(0,n.length-1)),n[n.length-2],n[n.length-1],r):t},q=function(e,t,n,r){var a;return a={},Object(c.a)(a,e.player,[].concat(Object(s.a)(e[e.player].filter((function(e){return!w(e,t)}))),[n])),Object(c.a)(a,e.opponent,e[e.opponent].filter((function(e){return M(t,n)/2===1||!w(e,I(t,n))}))),Object(c.a)(a,"player",r?e.opponent:e.player),Object(c.a)(a,"opponent",r?e.player:e.opponent),a},M=function(e,t){var n=Object(f.a)(e,2),r=n[0],a=n[1],i=Object(f.a)(t,2),o=i[0],s=i[1];return Math.abs(o-r)+Math.abs(s-a)},I=function(e,t){var n=Object(f.a)(e,2),r=n[0],a=n[1],i=Object(f.a)(t,2);return[(r+i[0])/2,(a+i[1])/2]},P=function(e,t,n){return e.actions(t).map((function(r){return{action:r,outcome:D(e,e.result(t,r),n-1)}})).reduce((function(e,t){return t.outcome>e.outcome?t:e}))},x=function(e,t,n){return e.actions(t).map((function(r){return{action:r,outcome:A(e,e.result(t,r),n-1)}})).reduce((function(e,t){return t.outcome<e.outcome?t:e}))},A=function(e,t,n){return e.terminalTest(t)?e.utility(t):n<1?e.heuristic(t):e.actions(t).reduce((function(r,a){return Math.max(r,D(e,e.result(t,a),n-1))}),-1/0)},D=function(e,t,n){return e.terminalTest(t)?e.utility(t):n<1?e.heuristic(t):e.actions(t).reduce((function(r,a){return Math.min(r,A(e,e.result(t,a),n-1))}),1/0)},Q=function(e,t,n){return e.actions(t).map((function(r){return{action:r,outcome:H(e,e.result(t,r),n-1,-1/0,1/0)}})).reduce((function(e,t){return t.outcome>e.outcome?t:e}))},R=function(e,t,n){return e.actions(t).map((function(r){return{action:r,outcome:B(e,e.result(t,r),n-1,-1/0,1/0)}})).reduce((function(e,t){return t.outcome<e.outcome?t:e}))},B=function(e,t,n,r,a){if(e.terminalTest(t))return e.utility(t);if(n<1)return e.heuristic(t);var i=-1/0,o=!0,s=!1,c=void 0;try{for(var l,u=e.actions(t)[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var h=l.value;if((i=Math.max(i,H(e,e.result(t,h),n,r,a)))>=a)return i;r=Math.max(r,i)}}catch(p){s=!0,c=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}return i},H=function(e,t,n,r,a){if(e.terminalTest(t))return e.utility(t);if(n<1)return e.heuristic(t);var i=1/0,o=!0,s=!1,c=void 0;try{for(var l,u=e.actions(t)[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var h=l.value;if((i=Math.min(i,B(e,e.result(t,h),n,r,a)))<=r)return i;a=Math.min(a,i)}}catch(p){s=!0,c=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}return i},N=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"colour",value:function(e,t){return(this.props.y+this.props.x)%2===1?"light-tile":e&&t?"dark-tile active":"dark-tile"}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{ref:[this.props.y,this.props.x].join("-"),className:this.colour(this.props.highlighted,this.props.showHighlight),onClick:function(){return e.props.parentCallback(e.props.highlighted)}})}}]),t}(a.a.Component),Y=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"board"},[7,6,5,4,3,2,1,0].map((function(t){return a.a.createElement("div",{className:"row",key:t},[0,1,2,3,4,5,6,7].map((function(n){return a.a.createElement(N,{highlighted:e.props.highlightedSquares.some((function(e){var r=Object(f.a)(e,2),a=r[0],i=r[1];return a===t&&i===n})),showHighlight:e.props.showHighlight,y:t,x:n,state:e.props.state,parentCallback:function(r){return e.props.parentCallback(t,n,r)},key:n})})))})))}}]),t}(a.a.Component);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={transform:"translate3d(0, 0, 0)"},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"checkerStyle",value:function(e,t,n){var r=this;return n&&setTimeout((function(){return r.animation([e,t],n)}),10),{top:"calc(50vh - 50vmin + 1.25vmin + "+12.5*(7-e)+"vmin)",left:"calc(50vw - 50vmin + 1.25vmin + "+12.5*t+"vmin)",transition:"transform 300ms ease-in-out"}}},{key:"animation",value:function(e,t){var n=Object(f.a)(e,2),r=n[0],a=n[1],i=Object(f.a)(t,2),o=i[0],s=i[1];this.setState({transform:"translate3d("+12.5*(s-a)+"vmin,"+-12.5*(o-r)+"vmin,0)"})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{onClick:function(){e.props.parentCallback()},className:("p"===this.props.player?"checker-dark":"checker-light")+(this.props.highlighted?" highlighted":"")+(this.props.royal?" royal":""),style:J({},this.checkerStyle(this.props.y,this.props.x,this.props.animation),{},this.state)})}}]),t}(a.a.Component),G=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return this.props.pieces.map((function(t){var n,r,i=Object(f.a)(t,2),o=i[0],s=i[1],c=e.props.animation.length>0;if(c&&w(e.props.animation[1],[o,s])){var l=Object(f.a)(e.props.animation[0],2);n=l[0],r=l[1]}return a.a.createElement(F,{player:e.props.player,selectedChecker:e.props.selectedChecker,highlighted:e.props.highlightedCheckers.some((function(e){return w(e,[o,s])})),parentCallback:function(){return e.props.parentCallback(o,s)},y:c?n:o,x:c?r:s,animation:!!c&&e.props.animation[1],royal:e.props.pieces.find((function(e){return w(e,[o,s])}))[2],key:o+","+s})}))}}]),t}(a.a.Component),$=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"dialog help"},a.a.createElement("div",{className:"bottomed"},a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("hide")}},"Hide help.")),a.a.createElement("div",null,a.a.createElement("p",null,"Highlights are ",this.props.highlights?"enabled. ":"disabled. ")),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("highlights",!e.props.highlights)}},this.props.highlights?"Disable them. ":"Enable them. ")),a.a.createElement("div",null,a.a.createElement("p",null,"You win the game if your opponent cannot do any moves and you have more pieces than them. In each round, you can move one of your checkers forward to a neighbouring empty black square. If this square is occupied by your opponent but the next square in this direction is free, then you can jump to the free square whilst your opponent will lose their checker. After a jump, you can perform another jump in the same round. If you reach the last row with a checker, it will be crowned and you can also move and jump backwards with it. When a checker jumps over a crowned checker, it will take over the crown. The same rules apply to both players. The player with the brown checkers starts.")),a.a.createElement("div",null,a.a.createElement("p",null,"You can choose an AI for each player. The Random Moves AI will perform random, valid moves. The other AIs presume are perfect and presume that you are perfect. The Dumb AI anticipates ",this.props.limits.dumb," rounds, the Intermediate AI ",this.props.limits.intermediate," rounds, and the Smart AI ",this.props.limits.smart," rounds.")),a.a.createElement("div",null,a.a.createElement("p",null,"This is an open-source game. You are very welcome to report bugs and to contribute.")),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return window.open("https://github.com/davidpomerenke/checkers","_blank")}},"Find it on GitHub.")),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("hide")}},"Hide help."))))}}]),t}(a.a.Component),_=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"message",value:function(e,t,n,r,a){var i;return"invalid move"===e?i=2!==t.selectedChecker.length?"Please select the checker you want to move.":(n+r)%2===1?"You can only move diagonally \u2013 that is, to another black square.":(n-t.selectedChecker[0])*E(t.state)<=0?"You can only move forward (unless you are royal).":b.actions(t.state).some((function(e){return w(e[0],t.selectedChecker)&&M(e[0],e[1])/2===2}))&&M(t.selectedChecker,[n,r])/2===1?"There is a jump available, so you need to jump.":"You can only move one step at a time (unless you jump over your opponent's checker).":"invalid checker"===e&&(t.state.player!==a?i=2===t.selectedChecker.length?"You can only move to an empty square.":("p"===t.state.player?" Brown ":" Beige ")+" is next.":b.actions(t.state).some((function(e){return w(e[0],[n,r])}))||(i=b.actions(t.state).some((function(e){return M(e[0],e[1])/2===2}))&&!b.actions(t.state).some((function(e){return w(e[0],[n,r])&&M(e[0],e[1])/2===2}))?"There is a jump available for one or more different checkers, so you need to perform one of these jumps.":"All moves of this checker are blocked.")),i}},{key:"render",value:function(){var e=this,t=this.message(this.props.error[0],this.props.error[1],this.props.error[2],this.props.error[3],this.props.error[4]);return t?a.a.createElement("div",null,a.a.createElement("p",null,t),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("help")}},"Read the rules."))):""}}]),t}(a.a.Component),z=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={help:!1},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"subtitles"+(this.state.help?"":" marginal")},this.state.help&&a.a.createElement($,{highlights:this.props.highlights,limits:this.props.limits,parentCallback:function(t){return"hide"===t?e.setState({help:!1}):e.props.parentCallback({highlights:!e.props.highlights})}}),this.props.error.length>0&&!this.state.help&&a.a.createElement(_,{error:this.props.error,parentCallback:function(t){return e.setState({help:!0})}}),void 0===this.props.ai.p&&!this.state.help&&a.a.createElement(K,{p:"p",parentCallback:function(t){return"help"===t?e.setState({help:!0}):e.props.parentCallback({ai:["p",t]})},error:this.props.error}),void 0!==this.props.ai.p&&void 0===this.props.ai.q&&!this.state.help&&a.a.createElement(K,{p:"q",parentCallback:function(t){return"help"===t?e.setState({help:!0}):e.props.parentCallback({ai:["q",t]})},error:this.props.error}),b.terminalTest(this.props.state)&&a.a.createElement(L,{state:this.props.state}))}}]),t}(a.a.Component),K=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",null,0===this.props.error.length&&a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("p",null,"p"===this.props.p?"Brown starts.":"Beige is next.")),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("help")}},"Read the rules."))),a.a.createElement("div",null,a.a.createElement("p",null,"Select an AI for the brown side:")),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("random")}},"Random Moves AI")),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("dumb")}},"Dumb AI")),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("intermediate")}},"Intermediate AI")),a.a.createElement("div",null,a.a.createElement("span",{onClick:function(){return e.props.parentCallback("smart")}},"Smart AI")))}}]),t}(a.a.Component),L=function(e){function t(){return Object(l.a)(this,t),Object(h.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("p",null,b.heuristic(this.props.state)>0?"Brown":"Beige"," wins. Congratulations! ",a.a.createElement("br",null),"Reload to play again."))}}]),t}(a.a.Component);function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X={pruning:!1,limits:{dumb:1,intermediate:2,smart:3},pauseTime:700,highlightsDefault:!0},Z=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).state={state:b.initialState,selectedChecker:[],ai:{p:void 0,q:void 0},error:[],highlights:X.highlightsDefault,displayQueue:[],animation:[]},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"app"},a.a.createElement(Y,{highlightedSquares:b.actions(this.state.state).filter((function(t){return w(t[0],e.state.selectedChecker)})).map((function(e){return e[e.length-1]})),showHighlight:this.state.highlights,parentCallback:function(t,n,r){return e.moveResult(t,n,r)}}),["p","q"].map((function(t){return a.a.createElement(G,{key:t,player:t,pieces:e.state.state[t],selectedChecker:e.state.selectedChecker,highlightedCheckers:e.state.highlights&&e.state.state.player===t&&!e.state.ai[e.state.state.player]?b.actions(e.state.state).map((function(e){return e[0]})):[],parentCallback:function(n,r){return e.highlightResult(n,r,t)},animation:e.state.animation})})),a.a.createElement(z,{parentCallback:function(t){"highlights"in t?e.setState({highlights:t.highlights}):"ai"in t&&(e.setState({ai:V({},e.state.ai,Object(c.a)({},t.ai[0],t.ai[1]))}),setTimeout((function(){return e.aiMoves()}),0))},error:this.state.error,ai:this.state.ai,state:this.state.state,highlights:this.state.highlights,limits:X.limits}))}},{key:"moveResult",value:function(e,t,n){var r=this;if(n){var a=this.state.ai;void 0===this.state.ai.p?a.p=!1:void 0===this.state.ai.q&&(a.q=!1),this.setState({ai:a}),this.setState({displayQueue:[b.actions(this.state.state).filter((function(n){return w(n[0],r.state.selectedChecker)&&w(n[n.length-1],[e,t])}))[0]]}),setTimeout((function(){return r.move()}),0)}else this.setState({error:["invalid move",this.state,e,t]})}},{key:"highlightResult",value:function(e,t,n){n===this.state.state.player&&b.actions(this.state.state).some((function(n){return w(n[0],[e,t])}))?this.setState({selectedChecker:[e,t],error:[]}):this.setState({error:["invalid checker",this.state,e,t,n]})}},{key:"move",value:function(){var e=this;if(!b.terminalTest(this.state.state)&&this.state.displayQueue.length>0){var t=this.state.displayQueue[0];this.state.displayQueue.length>1||t.length>2?setTimeout((function(){return e.move()}),X.pauseTime):setTimeout((function(){return e.aiMoves()}),X.pauseTime),function(e,t){console.log(("p"===e?"brown: ":"beige: ")+t.map((function(e){var t=Object(f.a)(e,2);return t[0]+", "+t[1]})).join(" -> "))}(this.state.state.player,t),this.setState({state:V({},b.result(this.state.state,t.slice(0,2)),{player:t.length<=2&&this.state.displayQueue.length<=1?this.state.state.opponent:this.state.state.player,opponent:t.length<=2&&this.state.displayQueue.length<=1?this.state.state.player:this.state.state.opponent}),displayQueue:[].concat(Object(s.a)(t.length>2?[t.slice(1)]:[]),Object(s.a)(this.state.displayQueue.slice(1))),error:[],selectedChecker:[],animation:t.slice(0,2)})}}},{key:"aiMoves",value:function(){var e=this,t=X.pruning?Q:P,n=X.pruning?R:x,r=function(r){var a,i;if("random"===e.state.ai[r]){a=(i=b.actions(e.state.state))[Math.floor(Math.random()*i.length)]}else a=function(e){return"p"===e?t:n}(r)(b,e.state.state,X.limits[e.state.ai[r]]).action;e.setState({displayQueue:[a]}),setTimeout((function(){return e.move()}),X.pauseTime)};this.state.ai.p&&"p"===this.state.state.player?r("p"):this.state.ai.q&&"q"===this.state.state.player&&r("q")}}]),t}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[18,1,2]]]);
//# sourceMappingURL=main.19a05dea.chunk.js.map